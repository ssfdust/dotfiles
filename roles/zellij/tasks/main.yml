- stat:
    path: "~/.config/zellij"
  register: link

- name: remove symlink
  file:
    path: "~/.config/zellij"
    state: absent
  when: link.stat.islnk is defined and link.stat.islnk

- name: Create zpager executable file
  become: true
  copy:
    src: zpager
    dest: /usr/local/bin/zpager
    mode: 0o755

- name: deploy zellij
  ansible.posix.synchronize:
    src: zellij
    dest: ~/.config
    delete: yes
    recursive: yes
